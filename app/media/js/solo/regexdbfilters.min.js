if(typeof Solo=="undefined"){var Solo={}}if(typeof Solo.Regexdbfilters=="undefined"){Solo.Regexdbfilters={translations:{},currentRoot:null}}(function(b){Solo.Regexdbfilters.activeRootChanged=function(){Solo.Regexdbfilters.load(b("#active_root").val())};Solo.Regexdbfilters.load=function a(c){var e={root:c,verb:"list"};var d={akaction:JSON.stringify(e)};Solo.System.doAjax(d,function(f){Solo.Regexdbfilters.render(f)},null,false,15000)};Solo.Regexdbfilters.render=function(e){var c=b("#ak_list_contents");c.html("");b.each(e,function(f,g){Solo.Regexdbfilters.addRow(g,c)});var d={type:"",item:""};Solo.Regexdbfilters.addNewRow(c)};Solo.Regexdbfilters.addRow=function(i,h){var d=b(document.createElement("tr")).appendTo(h);var f="fa fa-pencil-square";if(i.item==""){f="fa fa-plus-square"}var g=b(document.createElement("td")).append(b(document.createElement("span")).addClass("table-icon-container edit ak-toggle-button label label-default").click(function(){var k=["regextables","regextabledata"];var j=b(document.createElement("select")).attr("name","type").addClass("type-select");b.each(k,function(o,q){var n="UI-FILTERTYPE-"+String(q).toUpperCase();var m=Solo.Regexdbfilters.translations[n];var p=false;if(q==i.type){p=true}j.append(b(document.createElement("option")).attr("value",q).html(m));if(p){j.children(":last").attr("selected","selected")}});d.find("td.ak-type span").hide();d.find("td.ak-type").append(j);var l=b(document.createElement("input")).attr({type:"text",name:"item",size:"100"}).val(i.item);d.find("td.ak-item code").hide();d.find("td.ak-item").append(l);d.find("td:first span.edit").hide();d.find("td:first span.delete").hide();d.find("td:first").append(b(document.createElement("span")).addClass("table-icon-container save ak-toggle-button label label-default").click(function(){d.find("td:first span.delete").hide();var n=j.val();var o=l.val();if(trim(o)==""){if(i.item==""){d.find("td:first span.cancel").click();return}else{d.find("td:first span.delete").click();return}}var m={verb:"set",type:n,node:o,root:b("#active_root").val()};Solo.Fsfilters.toggle(m,b(this).find("span").first(),function(r,s){var q=(i.item!="")&&(i.type!="")&&((i.item!=o)||(i.type!=n));var u=(i.item=="")||(i.type=="");if(i.item==""){d.find("td:first span.edit").find("span").first().removeClass("fa-plus-square").addClass("fa-pencil-square")}m.type=i.type;m.node=i.item;i.type=n;i.item=o;var t="UI-FILTERTYPE-"+String(i.type).toUpperCase();var p=Solo.Regexdbfilters.translations[t];d.find("td.ak-type span").html(p);d.find("td.ak-item code").html(escapeHTML(i.item));d.find("td:first span.cancel").click();if(q){m.verb="remove";Solo.Fsfilters.toggle(m,b(this).find("span").first(),function(v,w){},false)}else{if((i.item!=o)||(i.type!=n)||u){Solo.Regexdbfilters.addNewRow(h)}}},false)}).append(b(document.createElement("span")).addClass("fa fa-floppy-o")));d.find("td:first").append(b(document.createElement("span")).addClass("table-icon-container cancel ak-toggle-button label label-default").click(function(){d.find("td:first span.save").remove();d.find("td:first span.cancel").remove();d.find("td:first span.edit").show();if(i.item!=""){d.find("td:first span.delete").show()}j.remove();d.find("td.ak-type span").show();l.remove();d.find("td.ak-item code").show()}).append(b(document.createElement("span")).addClass("fa fa-ban")))}).append(b(document.createElement("span")).addClass(f))).append(b(document.createElement("span")).addClass("table-icon-container delete ak-toggle-button label label-default").click(function(){var j={verb:"remove",type:i.type,node:i.item,root:b("#active_root").val()};Solo.Fsfilters.toggle(j,b(this).find("span").first(),function(k,l){d.remove();if(i.item==""){Solo.Regexdbfilters.addNewRow(h)}},false)}).append(b(document.createElement("span")).addClass("fa fa-trash-o"))).appendTo(d);if(i.item==""){b(g).find("span.delete").hide()}var e="UI-FILTERTYPE-"+String(i.type).toUpperCase();var c=Solo.Regexdbfilters.translations[e];if(i.type==""){c=""}d.append(b(document.createElement("td")).addClass("ak-type").html("<span>"+c+"</span>"));d.append(b(document.createElement("td")).addClass("ak-item").html("<code>"+((i.item==null)?"":escapeHTML(i.item))+"</code>"))};Solo.Regexdbfilters.addNewRow=function(d){var c={type:"",item:""};Solo.Regexdbfilters.addRow(c,d)}}(akeeba.jQuery));
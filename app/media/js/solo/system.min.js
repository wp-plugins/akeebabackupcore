if(typeof Solo=="undefined"){var Solo={}}if(typeof Solo.System=="undefined"){Solo.System={};Solo.System.notification={iconURL:""};Solo.System.params={AjaxURL:"",useIFrame:false,errorCallback:null,iFrame:null,iFrameCallbackError:null,iFrameCallbackSuccess:null,password:""};Solo.System.translations=[];Solo.System.modalDialog=null}(function(a){Solo.System.submitForm=function(c,b){if(!(typeof(b)==="undefined")){a("#"+c+" input[name='task']").val(b)}a("#"+c).submit()};Solo.System.defaultErrorHandler=function(b){alert("An error has occurred\n"+b)};Solo.System.doIframeCall=function(e,b,c){akeeba_iframecb_success=b;akeeba_iframecb_error=c;Solo.System.params.iFrame=document.createElement("iframe");a(akeeba_iframe).css({display:"none",visibility:"hidden",height:"1px"}).attr("onload","Solo.System.iframeCallback").insertAfter("#response-timer");var d=Solo.System.params.AjaxURL+"&"+a.param(e);a(Solo.System.params.iFrame).attr("src",d)};Solo.System.iframeCallback=function(){var h=null;if(Solo.System.params.iFrame.contentDocument){h=Solo.System.params.iFrame.contentDocument}else{h=Solo.System.params.iFrame.contentWindow.document}var g=h.body.innerHTML;a(Solo.System.params.iFrame).remove();Solo.System.params.iFrame=null;var f=null;var d="";var b=g.indexOf("###");if(b==-1){g="Invalid AJAX data: "+g;if(Solo.System.params.iFrameCallbackError==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(g)}}else{Solo.System.params.iFrameCallbackError(g)}return}else{if(b!=0){f=g.substr(0,b);d=g.substr(b)}else{d=g}}d=d.substr(3);var b=d.lastIndexOf("###");d=d.substr(0,b);try{var e=JSON.parse(d)}catch(c){var g=c.message+"\n<br/>\n<pre>\n"+d+"\n</pre>";if(Solo.System.params.iFrameCallbackError==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(g)}}else{Solo.System.params.iFrameCallbackError(g)}return}Solo.System.params.iFrameCallbackSuccess(e)};Solo.System.doAjax=function(f,d,g,b,j){if(Solo.System.params.useIFrame){Solo.System.doIframeCall(f,d,g);return}if(b==null){b=true}if(!b){var c=new Date().getTime()/1000;var k=parseInt(c,10);var h=Math.round((c-k)*1000)/1000;f._cacheBustingJunk=h}if(j==null){j=600000}var e={type:"POST",url:Solo.System.params.AjaxURL,cache:false,data:f,timeout:j,success:function(q){var p=null;var n="";var l=q.indexOf("###");if(l==-1){q=Solo.System.sanitizeErrorMessage(q);q="Invalid AJAX data: "+q;if(g==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(q)}}else{g(q)}return}else{if(l!=0){p=q.substr(0,l);n=q.substr(l)}else{n=q}}n=n.substr(3);var l=n.lastIndexOf("###");n=n.substr(0,l);try{var o=JSON.parse(n)}catch(m){n=Solo.System.sanitizeErrorMessage(n);var q=m.message+"\n<br/>\n<pre>\n"+n+"\n</pre>";if(g==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(q)}}else{g(q)}return}d(o)},error:function(l,o,n){var m="<strong>AJAX Loading Error</strong><br/>HTTP Status: "+l.status+" ("+l.statusText+")<br/>";m=m+"Internal status: "+o+"<br/>";m=m+"XHR ReadyState: "+l.readyState+"<br/>";m=m+"Raw server response:<br/>"+Solo.System.sanitizeErrorMessage(l.responseText);if(g==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(m)}}else{g(m)}}};if(b){var i=window.jQuery.manageAjax;if(typeof i=="undefined"){var i=a.manageAjax}if(typeof i=="undefined"){var i=akeeba.jQuery.manageAjax}i.add("akeeba-ajax-profile",e)}else{akeeba.jQuery.ajax(e)}};Solo.System.sanitizeErrorMessage=function(b){if(b.indexOf("<script")>-1){b="(HTML containing script tags)"}return b};Solo.System.doEncryptedAjax=function(e,b,d){json=JSON.stringify(e);if(Solo.System.params.password.length>0){json=AesCtr.encrypt(json,Solo.System.params.password,128)}var f={json:json};var c={type:"POST",url:Solo.System.params.AjaxURL,cache:false,data:f,timeout:600000,success:function(l){var k=null;var i="";var g=l.indexOf("###");if(g==-1){l="Invalid AJAX data: "+l;if(d==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(l)}}else{d(l)}return}else{if(g!=0){k=l.substr(0,g);i=l.substr(g)}else{i=l}}i=i.substr(3);g=i.lastIndexOf("###");i=i.substr(0,g);if(Solo.System.params.password.length>0){i=AesCtr.decrypt(i,Solo.System.params.password,128)}try{var j=JSON.parse(i)}catch(h){errorMessage=h.message+"\n<br/>\n<pre>\n"+i+"\n</pre>";if(d==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(errorMessage)}}else{d(errorMessage)}return}b(j)},error:function(g,j,i){var h="AJAX Loading Error: "+j;if(d==null){if(Solo.System.params.errorCallback!=null){Solo.System.params.errorCallback(h)}}else{d(h)}}};a.ajax(c)};Solo.System.checkAll=function(d,g){if(!g){g="cb"}if(d.form){var j=0;for(var b=0,h=d.form.elements.length;b<h;b++){var f=d.form.elements[b];if(f.type==d.type){if((g&&f.id.indexOf(g)==0)||!g){f.checked=d.checked;j+=(f.checked==true?1:0)}}}if(d.form.boxchecked){d.form.boxchecked.value=j}return true}return false};Solo.System.isChecked=function(b,c){if(typeof(c)==="undefined"){c=document.getElementById("adminForm")}if(b==true){c.boxchecked.value++}else{c.boxchecked.value--}};Solo.System.tableOrdering=function(b,d,c,e){if(typeof(e)==="undefined"){e=document.getElementById("adminForm")}e.filter_order.value=b;e.filter_order_Dir.value=d;Solo.System.submitForm(a(e).attr("id"),c)};Solo.System.modal=function(k){try{rel=a(k).attr("rel");k=JSON.parse(rel)}catch(m){}var r=a(document.createElement("div")).addClass("akeeba-bootstrap modal fade").attr({tabindex:"-1",role:"dialog","aria-hidden":true});var f=a(document.createElement("div")).addClass("modal-dialog").appendTo(r);var g=a(document.createElement("div")).addClass("modal-content").appendTo(f);if(typeof(k.title)!=="undefined"){var b=a(document.createElement("div")).addClass("modal-header").appendTo(g);var j=a(document.createElement("button")).addClass("close").attr({"data-dismiss":"modal","aria-hidden":true}).html("&times;").appendTo(b);var q=a(document.createElement("h4")).addClass("modal-title").html(k.title).appendTo(b);if(typeof(k.CancelHandler)!=="undefined"){j.click(function(s){var t=k.CancelHandler;r.modal("hide");t(r);s.preventDefault()})}}var p=a(document.createElement("div")).addClass("modal-body").appendTo(g);if(typeof(k.href)==="undefined"){p.html(k.body)}else{var c=a(document.createElement("iframe")).attr({src:k.href,width:"100%",height:400,frameborder:0,allowtransparency:"true"}).appendTo(p);if(typeof(k.iFrameHeight)!=="undefined"){c.attr("height",k.iFrameHeight)}if(typeof(k.iFrameWidth)!=="undefined"){c.attr("width",k.iFrameWidth)}}var l=true;if(typeof(k.showButtons)!=="undefined"){l=k.showButtons}if(l){var i=a(document.createElement("div")).addClass("modal-footer").appendTo(g);var n=Solo.System.translations["UI-MODAL-OK"];var h=Solo.System.translations["UI-MODAL-CANCEL"];if(typeof(k.OkLabel)!=="undefined"){n=k.OkLabel}if(typeof(k.CancelLabel)!=="undefined"){h=k.CancelLabel}var d=a(document.createElement("button")).addClass("btn btn-default").attr({type:"button","data-dismiss":"modal"}).html(h).appendTo(i);var o=a(document.createElement("button")).addClass("btn btn-primary").attr({type:"button"}).html(n).appendTo(i);if(typeof(k.CancelHandler)!=="undefined"){d.click(function(s){var t=k.CancelHandler;r.modal("hide");t(r);s.preventDefault()})}if(typeof(k.OkHandler)!=="undefined"){o.click(function(s){var t=k.OkHandler;r.modal("hide");t(r);s.preventDefault()})}else{o.click(function(s){r.modal("hide");s.preventDefault()})}if(n.trim()==""){o.css("display","none")}if(h.trim()==""){d.css("display","none")}}Solo.System.modalDialog=r;r.modal({keyboard:false,backdrop:"static"})};Solo.System.notification.askPermission=function(){if(window.Notification==undefined){return}if(window.Notification.permission=="default"){window.Notification.requestPermission()}};Solo.System.notification.notify=function(c,e,b){if(window.Notification==undefined){return}if(window.Notification.permission!="granted"){return}if(b==undefined){b=5000}if(e==undefined){body=""}var d=new window.Notification(c,{body:e,icon:Solo.System.notification.iconURL});if(b>0){setTimeout(function(f){return function(){f.close()}}(d),b)}};a.extend(a.easing,{none:function(e,d,c,b,f){return c+b*e}});a(document).ready(function(){var b=window.jQuery.manageAjax;if(typeof b=="undefined"){var b=a.manageAjax}if(typeof b=="undefined"){var b=akeeba.jQuery.manageAjax}var c=b.create("akeeba_ajax_profile",{queue:true,abortOld:false,maxRequests:1,preventDoubbleRequests:false,cacheResponse:false});Solo.System.notification.askPermission()})}(akeeba.jQuery));
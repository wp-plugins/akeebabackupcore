if(typeof Solo=="undefined"){var Solo={}}if(typeof Solo.Regexfsfilters=="undefined"){Solo.Regexfsfilters={translations:{},currentRoot:null}}(function(b){Solo.Regexfsfilters.activeRootChanged=function(){Solo.Regexfsfilters.load(b("#active_root").val())};Solo.Regexfsfilters.load=function a(c){var e={root:c,verb:"list"};var d={akaction:JSON.stringify(e)};Solo.System.doAjax(d,function(f){Solo.Regexfsfilters.render(f)},null,false,15000)};Solo.Regexfsfilters.render=function(e){var c=b("#ak_list_contents");c.html("");b.each(e,function(f,g){Solo.Regexfsfilters.addRow(g,c)});var d={type:"",item:""};Solo.Regexfsfilters.addNewRow(c)};Solo.Regexfsfilters.addRow=function(i,h){var d=b(document.createElement("tr")).appendTo(h);var f="fa fa-pencil-square";if(i.item==""){f="fa fa-plus-square"}var g=b(document.createElement("td")).css("width","4.5em").append(b(document.createElement("span")).addClass("table-icon-container edit ak-toggle-button label label-default").click(function(){var k=["regexfiles","regexdirectories","regexskipdirs","regexskipfiles"];var j=b(document.createElement("select")).attr("name","type").addClass("type-select");b.each(k,function(m,o){var n=false;if(o==i.type){n=true}j.append(b(document.createElement("option")).attr("value",o).html(Solo.Regexfsfilters.translations["UI-FILTERTYPE-"+String(o).toUpperCase()]));if(n){j.children(":last").attr("selected","selected")}});d.find("td.ak-type span").hide();d.find("td.ak-type").append(j);var l=b(document.createElement("input")).attr({type:"text",name:"item",size:"100"}).val(i.item);d.find("td.ak-item code").hide();d.find("td.ak-item").append(l);d.find("td:first span.edit").hide();d.find("td:first span.delete").hide();d.find("td:first").append(b(document.createElement("span")).addClass("table-icon-container save ak-toggle-button label label-default").click(function(){d.find("td:first span.delete").hide();var n=j.val();var o=l.val();if(trim(o)==""){if(i.item==""){d.find("td:first span.cancel").click();return}else{d.find("td:first span.delete").click();return}}var m={verb:"set",type:n,node:o,root:b("#active_root").val()};Solo.Fsfilters.toggle(m,b(this).find("span").first(),function(r,s){var q=(i.item!="")&&(i.type!="")&&((i.item!=o)||(i.type!=n));var u=(i.item=="")||(i.type=="");if(i.item==""){d.find("td:first span.edit").find("span").first().removeClass("fa-plus-square").addClass("fa-pencil-square")}m.type=i.type;m.node=i.item;i.type=n;i.item=o;var t="UI-FILTERTYPE-"+String(i.type).toUpperCase();var p=Solo.Regexfsfilters.translations[t];d.find("td.ak-type span").html(p);d.find("td.ak-item code").html(escapeHTML(i.item));d.find("td:first span.cancel").click();if(q){m.verb="remove";Solo.Fsfilters.toggle(m,b(this).find("span").first(),function(v,w){},false)}else{if((i.item!=o)||(i.type!=n)||u){Solo.Regexfsfilters.addNewRow(h)}}},false)}).append(b(document.createElement("span")).addClass("fa fa-floppy-o")));d.find("td:first").append(b(document.createElement("span")).addClass("table-icon-container cancel ak-toggle-button label label-default").click(function(){d.find("td:first span.save").remove();d.find("td:first span.cancel").remove();d.find("td:first span.edit").show();if(i.item!=""){d.find("td:first span.delete").show()}j.remove();d.find("td.ak-type span").show();l.remove();d.find("td.ak-item code").show()}).append(b(document.createElement("span")).addClass("fa fa-ban")))}).append(b(document.createElement("span")).addClass(f))).append(b(document.createElement("span")).addClass("table-icon-container delete ak-toggle-button label label-default").click(function(){var j={verb:"remove",type:i.type,node:i.item,root:b("#active_root").val()};Solo.Fsfilters.toggle(j,b(this).find("span").first(),function(k,l){d.remove();if(i.item==""){Solo.Regexfsfilters.addNewRow(h)}},false)}).append(b(document.createElement("span")).addClass("fa fa-trash-o"))).appendTo(d);if(i.item==""){b(g).find("span.delete").hide()}var e="UI-FILTERTYPE-"+String(i.type).toUpperCase();var c=Solo.Regexfsfilters.translations[e];if(i.type==""){c=""}d.append(b(document.createElement("td")).addClass("ak-type").html("<span>"+c+"</span>"));d.append(b(document.createElement("td")).addClass("ak-item").html("<code>"+((i.item==null)?"":escapeHTML(i.item))+"</code>"))};Solo.Regexfsfilters.addNewRow=function(d){var c={type:"",item:""};Solo.Regexfsfilters.addRow(c,d)}}(akeeba.jQuery));
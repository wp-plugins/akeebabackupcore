if(typeof Solo=="undefined"){var Solo={}}if(typeof Solo.Extradirs=="undefined"){Solo.Extradirs={translations:{}}}(function(a){Solo.Extradirs.render=function(c){var b=a("#ak_list_contents");b.html("");a.each(c,function(d,e){Solo.Extradirs.addRow(d,e,b)});Solo.Extradirs.addNewRecordButton(b)};Solo.Extradirs.addRow=function(b,d,c){a(document.createElement("tr")).addClass("ak_filter_row").data("rootuuid",b).data("def",d).append(a(document.createElement("td")).css("width","2em").append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container delete label label-default").click(function(){var e={uuid:a(this).parent().parent().data("rootuuid"),verb:"remove"};Solo.Fsfilters.toggle(e,a(this).find("span").first(),function(f,g){if(f.success==true){g.parent().parent().parent().remove()}})}).append(a(document.createElement("span")).addClass("deletebutton ak-toggle-button fa fa-trash-o")))).append(a(document.createElement("td")).css("width","4.5em").append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container edit label label-default").click(function(){var e=a(this).parent().parent();a(this).hide();e.find("td:first").find("span.delete").hide();a(this).parent().append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container save label label-default").click(function(){var h=e.find(".ak_filter_item:first").find("input.folder_editor").val();h=a.trim(h);var j=e.find(".ak_filter_item:first").next().find("input.virtual_editor").val();j=a.trim(j);if(empty(j)){j=Math.uuid(8)+"-"+basename(h)}if(h==""){var i=e.data("def");if(i[0]==""){a(this).parent().find("span.cancel").click()}else{e.find("td:first").find("span.delete").show();e.find("td:first").find("span.delete").click()}}else{var i=e.data("def");var g={uuid:e.data("rootuuid"),root:h,data:j,verb:"set"};Solo.Fsfilters.toggle(g,a(this).find("span").first(),function(k,l){if(k.success==true){if(i[0]==""){a(l).parent().find("span.editbutton").removeClass("fa-plus-square").addClass("fa-pencil-square ak-toggle-button");Solo.Extradirs.addNewRecordButton(c)}var m=[h,j];e.data("def",m);e.find(".ak_filter_item:first").find("span.ak_directory").html(h);e.find(".ak_filter_item:first").next().find("span.ak_virtual").html(j);a(l).parent().parent().find("span.edit").show();a(l).parent().parent().find("span.edit > span").addClass("fa-pencil-square").removeClass("fa-plus-square");a(l).parent().parent().find("span.cancel").remove();e.find("td:first").find("span.delete").show();a(l).remove();e.find(".ak_filter_item:first").find("input.folder_editor").remove();e.find(".ak_filter_item:first").next().find("input.virtual_editor").remove();e.find(".ak_filter_item:first").find("span.browse").remove();e.find(".ak_filter_item:first").find("span.ak_directory").show();e.find(".ak_filter_item:first").next().find("span.ak_virtual").show()}},false)}}).append(a(document.createElement("span")).addClass("ak-toggle-button ak-stacked-button fa fa-floppy-o")));a(this).parent().append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container cancel label label-default").click(function(){a(this).parent().find("span.edit").show();a(this).parent().find("span.save").remove();a(this).remove();e.find(".ak_filter_item:first").find("input.folder_editor").remove();e.find(".ak_filter_item:first").next().find("input.virtual_editor").remove();e.find(".ak_filter_item:first").find("span.browse").remove();e.find(".ak_filter_item:first").find("span.ak_directory").show();e.find(".ak_filter_item:first").next().find("span.ak_virtual").show();var g=e.data("def");if(g[0]!=""){e.find("td:first").find("span.delete").show()}}).append(a(document.createElement("span")).addClass("ak-toggle-button ak-stacked-button glyphicon glyphicon-remove")));var f=e.data("def");a(this).parent().parent().find(".ak_filter_item:first").append(a(document.createElement("input")).attr({type:"text",size:60}).addClass("folder_editor").val(f[0])).append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container label label-default browse").click(function(){var g=a(this).parent().find("input.folder_editor");var h=a.trim(g.val());if(h==""){h="[ROOTPARENT]"}Solo.Configuration.onBrowser(h,g)}).append(a(document.createElement("span")).addClass("ak-toggle-button glyphicon glyphicon-folder-open")));a(this).parent().parent().find(".ak_filter_item:first").next().append(a(document.createElement("input")).attr({type:"text",size:60}).addClass("virtual_editor").val(f[1]));e.find(".ak_filter_item:first").find("span.ak_directory").hide();e.find(".ak_filter_item:first").next().find("span.ak_virtual").hide()}).append(a(document.createElement("span")).addClass("editbutton ak-toggle-button fa fa-pencil-square")))).append(a(document.createElement("td")).addClass("ak_filter_item").append(a(document.createElement("span")).addClass("ak_filter_name").addClass("ak_directory").html(d[0]))).append(a(document.createElement("td")).addClass("ak_filter_item").append(a(document.createElement("span")).addClass("ak_filter_name").addClass("ak_virtual").html(d[1]))).appendTo(a(c))};Solo.Extradirs.addNewRecordButton=function(d){var b=Math.uuid();var c=new Array;c[0]="";c[1]="";Solo.Extradirs.addRow(b,c,d);a("#ak_list_contents tr:last-child td:first-child span:first").hide();a("#ak_list_contents tr:last-child td:nth-child(2) span:last").removeClass("fa-pencil-square").addClass("fa-plus-square").addClass("ak-toggle-button")}}(akeeba.jQuery));